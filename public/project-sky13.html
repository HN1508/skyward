<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SKYWARD â€¢ Má»«ng sinh nháº­t 13 nÄƒm Ä‘áº¡i gia Ä‘Ã¬nh Sky</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background:#0a0f18; color:#e6ecf5; }
    .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(10px); }
    .chip { border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.04); }
    .divider { border-color: rgba(255,255,255,0.12); }
    .card:hover { transform: translateY(-4px); transition: .2s; }
    #popup { backdrop-filter: blur(6px); }
    #popupContent { max-height: 90vh; overflow-y: auto; }

    /* =========================
       âœ… BACK BUTTON (Ä‘áº¹p nhÆ° máº«u)
       ========================= */
    .btn-back{
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 60;

      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;

      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(226,232,240,.96);

      font-weight: 900;
      letter-spacing: .2px;
      box-shadow: 0 14px 34px rgba(0,0,0,.35);

      transition: transform .18s ease, background .18s ease, border-color .18s ease, filter .18s ease;
      white-space: nowrap;
      text-decoration: none;
    }
    .btn-back:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.09);
      border-color: rgba(147,197,253,.55);
      filter: brightness(1.04);
    }
    .btn-back:active{ transform: translateY(0); }

    .btn-back .icon{
      width: 34px;
      height: 34px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius: 999px;

      background: radial-gradient(circle at 30% 30%, rgba(59,130,246,.40), rgba(59,130,246,.12));
      border: 1px solid rgba(59,130,246,.35);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.15);
      font-weight: 900;
      line-height: 1;
    }

    @media (max-width: 640px){
      .btn-back{
        top: 14px;
        left: 14px;
        padding: 9px 12px;
      }
      .btn-back .icon{ width: 32px; height: 32px; }
    }
  </style>
</head>

<body class="pb-16">

  <!-- âœ… NÃºt vá» trang chÃ­nh (Ä‘áº·t Ä‘Ãºng trong body) -->
  <a href="index.html" class="btn-back" aria-label="Vá» trang chÃ­nh">
    <span class="icon">â†</span>
    <span>Vá» trang chÃ­nh</span>
  </a>

  <!-- Header -->
  <header class="max-w-5xl mx-auto px-6 pt-8">
    <div class="flex items-center justify-between">
      <a href="/" class="text-blue-300 font-bold tracking-wide">SKYWARD</a>
      <div class="flex items-center space-x-2">
        <span class="px-3 py-1 rounded-full text-xs chip">ğŸ‰ Birthday Project</span>
        <span id="statusBadge"
          class="px-3 py-1 rounded-full text-xs font-semibold bg-green-500 bg-opacity-20 border border-green-400 text-green-200">
          ğŸŸ¢ Äang diá»…n ra
        </span>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="max-w-5xl mx-auto px-6 pt-10 pb-8">
    <div class="glass rounded-2xl p-8 md:p-10 shadow">
      <p class="text-sm text-blue-200 opacity-90">SKYWARD PROJECT</p>
      <h1 class="text-3xl md:text-4xl font-extrabold text-blue-300 mt-2 leading-tight">
        ğŸ‰ Má»ªNG SINH NHáº¬T 13 NÄ‚M<br/>
        Äáº I GIA ÄÃŒNH SKY ğŸ©µ
      </h1>

      <p class="mt-4 opacity-90 leading-relaxed max-w-3xl">
        MÆ°á»i ba nÄƒm bÃªn nhau lÃ  má»™t hÃ nh trÃ¬nh Ä‘áº§y cáº£m xÃºc, tá»± hÃ o vÃ  trÆ°á»Ÿng thÃ nh cÃ¹ng TÃ¹ng.
        Cáº£m Æ¡n Sky vÃ¬ luÃ´n yÃªu thÆ°Æ¡ng, Ä‘á»“ng hÃ nh vÃ  táº¡o nÃªn má»™t báº§u trá»i tháº­t vÄƒn minh, tháº­t Ä‘áº¹p ğŸ¥ºğŸ©µ
      </p>

      <p class="mt-3 opacity-85 max-w-3xl">
        NhÃ¢n dá»‹p Ä‘áº·c biá»‡t nÃ y, Skyward cÃ¹ng má»™t <b>Skyboy giáº¥u tÃªn</b> xin gá»­i táº·ng Ä‘áº¡i gia Ä‘Ã¬nh
        nhá»¯ng mÃ³n quÃ  nhá» nhÆ°ng Ä‘áº§y yÃªu thÆ°Æ¡ng ğŸ’™
      </p>

      <div class="mt-6 flex flex-col sm:flex-row gap-3">
        <a href="#support" class="px-5 py-3 rounded-xl chip hover:bg-blue-500 font-semibold text-center">
          â›… Trá»£ giÃ¡ BÃ© MÃ¢y
        </a>
        <a href="#minigame" class="px-5 py-3 rounded-xl chip hover:bg-opacity-10 font-semibold text-center">
          ğŸ® Minigame Decor Skylight
        </a>
      </div>

      <!-- Countdown + Slots -->
      <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="chip rounded-xl p-4">
          <div class="text-sm opacity-75">â›… Slot trá»£ giÃ¡ cÃ²n láº¡i</div>
          <div class="text-2xl font-extrabold mt-1"><span id="slotsRemaining">--</span>/60</div>
          <button onclick="fetchSlotsRemainingFromSheet()" class="mt-2 w-full px-4 py-2 rounded-xl chip hover:bg-opacity-10 font-semibold">
            ğŸ”„ LÃ m má»›i slot
          </button>
        </div>

        <div class="chip rounded-xl p-4">
          <div class="text-sm opacity-75">â³ Countdown Minigame</div>
          <div id="countdownText" class="text-lg font-bold mt-1">Äang táº£i...</div>
          <div class="text-xs opacity-70 mt-1">Má»‘c: 25/12/2025 23:59</div>
        </div>

        <div class="chip rounded-xl p-4">
          <div class="text-sm opacity-75">ğŸ“£ Káº¿t quáº£ minigame decor</div>
          <button onclick="openResults()" class="mt-2 w-full px-4 py-2 rounded-xl bg-blue-600 hover:bg-blue-500 font-semibold">
            Xem / CÃ´ng bá»‘ káº¿t quáº£
          </button>
          <div class="text-xs opacity-70 mt-1">Top 5 (áº£nh) â€¢ Top 10 â€¢ Lucky numbers</div>
        </div>
      </div>

    </div>
  </section>

  <hr class="divider my-8 max-w-5xl mx-auto"/>

  <!-- Trá»£ giÃ¡ -->
  <section class="max-w-5xl mx-auto px-6 pb-10" id="support">
    <h2 class="text-2xl font-bold text-blue-300">â›… Trá»£ giÃ¡ Skylight â€“ BÃ© MÃ¢y</h2>

    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-5">
      <div class="glass rounded-2xl p-6">
        <div class="text-sm opacity-75">Sá»‘ lÆ°á»£ng</div>
        <div class="text-2xl font-bold mt-1">ğŸ 60 slots</div>
      </div>
      <div class="glass rounded-2xl p-6">
        <div class="text-sm opacity-75">Má»©c trá»£ giÃ¡</div>
        <div class="text-2xl font-bold mt-1">ğŸ’¸ 200.000Ä‘ / slot</div>
      </div>
      <div class="glass rounded-2xl p-6">
        <div class="text-sm opacity-75">Thá»i gian</div>
        <div class="text-2xl font-bold mt-1">ğŸ—“ï¸ 25/11 â†’ háº¿t slot</div>
      </div>
    </div>

    <div class="mt-6 glass rounded-2xl p-6">
      <h3 class="font-bold text-blue-200 mb-2">ğŸ‰ Äiá»u kiá»‡n nháº­n trá»£ giÃ¡</h3>
      <ul class="space-y-2 opacity-90">
        <li>1ï¸âƒ£ LÃ  Sky</li>
        <li>2ï¸âƒ£ CÃ³ email xÃ¡c nháº­n mua bÃ© MÃ¢y tá»« <b>25/11/2025</b></li>
        <li>3ï¸âƒ£ Æ¯u tiÃªn Sky stream trÃªn Stationhead & cÃ¡c ná»n táº£ng khÃ¡c</li>
      </ul>

      <p class="mt-4 opacity-85">
        ğŸ“© Sky nÃ o muá»‘n nháº­n trá»£ giÃ¡ hÃ£y <b>inbox Skyward</b> Ä‘á»ƒ Ä‘Æ°á»£c hÆ°á»›ng dáº«n chi tiáº¿t hÆ¡n nha ğŸ˜‰
        Project nÃ y lÃ  sá»± káº¿t há»£p cá»§a Skyward vÃ  má»™t Skyboy bÃ­ áº©n Ä‘áº¹p trai Ä‘Ã³ nha ğŸ«£
      </p>

      <div class="mt-4 flex flex-col sm:flex-row gap-3">
        <a
          href="https://www.facebook.com/share/p/14UGT9By96r/"
          target="_blank"
          class="px-5 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 font-semibold text-center"
        >
          ğŸ“© LiÃªn há»‡ / Xem bÃ i trá»£ giÃ¡
        </a>
      </div>
    </div>
  </section>

  <hr class="divider my-8 max-w-5xl mx-auto"/>

  <!-- Minigame -->
  <section class="max-w-5xl mx-auto px-6 pb-10" id="minigame">
    <h2 class="text-2xl font-bold text-blue-300">ğŸ® Minigame Decor Skylight â€“ BÃ© MÃ¢y Ä‘iá»‡u Ä‘Ã </h2>

    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-5">
      <div class="glass rounded-2xl p-6">
        <h3 class="font-bold text-blue-200 mb-2">ğŸ©µ CÃ¡ch tham gia</h3>
        <ol class="list-decimal list-inside space-y-2 opacity-90">
          <li>Trang trÃ­ Skylight (bÃ© MÃ¢y) tháº­t xinh Ä‘áº¹p</li>
          <li>Chia sáº» bÃ i viáº¿t á»Ÿ cháº¿ Ä‘á»™ cÃ´ng khai</li>
          <li>
            Comment dÆ°á»›i bÃ i:
            <ul class="list-disc list-inside ml-4">
              <li>áº¢nh Skylight cá»§a báº¡n</li>
              <li>1 sá»‘ may máº¯n tá»« 1 â†’ 10000</li>
            </ul>
          </li>
        </ol>

        <p class="mt-3 text-sm opacity-80">
          âœ¨ Sky cÃ³ tÃ i khoáº£n Stationhead Ä‘Æ°á»£c cá»™ng thÃªm 1 sá»‘ may máº¯n / acc
        </p>

        <div class="mt-4 flex flex-col sm:flex-row gap-3">
          <a
            href="https://www.facebook.com/share/p/17kPXPVj2B/"
            target="_blank"
            class="px-5 py-3 rounded-xl bg-blue-600 hover:bg-blue-500 font-semibold text-center"
          >
            ğŸ”— Má»Ÿ bÃ i Minigame Decor Skylight
          </a>
        </div>
      </div>

      <div class="glass rounded-2xl p-6">
        <h3 class="font-bold text-blue-200 mb-2">ğŸ† Pháº§n thÆ°á»Ÿng</h3>
        <ul class="space-y-2 opacity-90">
          <li>ğŸ¥‡ 5 sets <b>CAPY</b> â€“ Skyward chá»n</li>
          <li>ğŸ¥ˆ 10 sets <b>CHIKO</b> â€“ vote cao nháº¥t</li>
          <li>ğŸ¥‰ 20 sets <b>TOMI</b> â€“ quay sá»‘ may máº¯n</li>
        </ul>

        <p class="mt-3 text-sm opacity-80">
          QuÃ  sáº½ Ä‘Æ°á»£c hÃ© lá»™ dáº§n â€“ Ä‘áº£m báº£o khÃ´ng lÃ m Sky tháº¥t vá»ng ğŸ©µ
        </p>
      </div>
    </div>

    <div class="mt-6 glass rounded-2xl p-6">
      <p class="opacity-90">
        â° <b>Thá»i gian:</b> tá»« <b>25/11/2025 â€“ 25/12/2025</b>
        Minigame kÃ©o dÃ i 1 thÃ¡ng nÃªn Sky chÆ°a cÃ³ Skylight váº«n ká»‹p tham gia nha ğŸ©µ
      </p>
    </div>
  </section>

  <!-- LÆ°u Ã½ -->
  <section class="max-w-5xl mx-auto px-6 pb-12">
    <div class="glass rounded-2xl p-6">
      <h3 class="font-bold text-blue-200 mb-2">â€¼ï¸ LÆ°u Ã½</h3>
      <p class="opacity-90 leading-relaxed">
        Team <b>khÃ´ng cháº¥p nháº­n áº£nh AI</b> vÃ  má»i hÃ¬nh thá»©c buff, mua like áº£o.
        Skyward cÃ³ quyá»n kiá»ƒm tra báº¥t cá»© lÃºc nÃ o; náº¿u phÃ¡t hiá»‡n gian láº­n sáº½ há»§y káº¿t quáº£ ngay láº­p tá»©c.
      </p>
    </div>
  </section>

  <footer class="max-w-5xl mx-auto px-6 pt-8 text-center text-xs opacity-60">
    ğŸ‚ ChÃºc Ä‘áº¡i gia Ä‘Ã¬nh Sky tuá»•i 13 tháº­t rá»±c rá»¡ â€¢ From Skyward & Sky with love ğŸ©µ
  </footer>

  <!-- Results Popup -->
  <div id="resultsPopup" class="fixed inset-0 bg-black bg-opacity-70 hidden p-6">
    <div id="resultsContent" class="max-w-4xl mx-auto bg-gray-900 p-8 rounded-2xl shadow-xl border border-gray-700"></div>
  </div>

  <script>
    // =========================
    // CONFIG
    // =========================
    const END_STAGE2 = new Date("2025-12-25T23:59:00+07:00"); // káº¿t thÃºc minigame decor
    const SUPPORT_START = new Date("2025-11-25T00:00:00+07:00"); // trá»£ giÃ¡ má»Ÿ tá»« 25/11
    const SLOTS_TOTAL = 60;

    // localStorage keys
    const LS_USED = "skyward_sky13_used_slots_v1";

    // =========================
    // BADGE AUTO: Äang diá»…n ra -> ÄÃ£ káº¿t thÃºc
    // =========================
    (function setStatusBadge() {
      const badge = document.getElementById("statusBadge");
      if (!badge) return;

      const now = new Date();
      if (now <= END_STAGE2) {
        badge.textContent = "ğŸŸ¢ Äang diá»…n ra";
        badge.className = "px-3 py-1 rounded-full text-xs font-semibold bg-green-500 bg-opacity-20 border border-green-400 text-green-200";
      } else {
        badge.textContent = "âœ… ÄÃ£ káº¿t thÃºc";
        badge.className = "px-3 py-1 rounded-full text-xs font-semibold bg-blue-500 bg-opacity-20 border border-blue-400 text-blue-200";
      }
    })();

    // =========================
    // COUNTDOWN tá»›i 25/12
    // =========================
    function formatCountdown(ms) {
      const s = Math.max(0, Math.floor(ms / 1000));
      const days = Math.floor(s / 86400);
      const hours = Math.floor((s % 86400) / 3600);
      const mins = Math.floor((s % 3600) / 60);
      const secs = s % 60;
      return `${days}d ${hours}h ${mins}m ${secs}s`;
    }

    function tickCountdown() {
      const el = document.getElementById("countdownText");
      if (!el) return;

      const now = new Date();
      const diff = END_STAGE2.getTime() - now.getTime();

      if (diff > 0) {
        el.textContent = formatCountdown(diff);
      } else {
        el.textContent = "ÄÃ£ káº¿t thÃºc ğŸ‰";
      }
    }
    tickCountdown();
    setInterval(tickCountdown, 1000);

    // =========================
    // SLOTS COUNTER (Google Sheet B1 realtime via CSV)
    // =========================
    const SLOTS_SHEET_CSV =
      "https://docs.google.com/spreadsheets/d/1Je490lKmXaiq0JEjGU_4r8jf-OI_8R-VBNLtrSy3QJg/export?format=csv&gid=0";

    async function fetchSlotsRemainingFromSheet() {
      const el = document.getElementById("slotsRemaining");
      if (!el) return;

      try {
        el.textContent = "...";

        const res = await fetch(SLOTS_SHEET_CSV, { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);

        const csv = await res.text();

        // HÃ ng 1 (row 1), cá»™t B (index 1) = Ã´ B1
        const lines = csv.trim().split(/\r?\n/);
        const row1 = lines[0] ? lines[0].split(",") : [];
        const b1Raw = (row1[1] || "").replace(/"/g, "").trim();

        // Chá»‰ láº¥y sá»‘ (phÃ²ng khi cÃ³ "10 slots"â€¦)
        const n = Number(String(b1Raw).replace(/[^\d]/g, ""));
        if (Number.isNaN(n)) throw new Error("B1 khÃ´ng pháº£i sá»‘: " + b1Raw);

        el.textContent = String(n);
      } catch (e) {
        console.error("Fetch slot tá»« Google Sheet lá»—i:", e);
        el.textContent = "--";
      }
    }

    // gá»i ngay + tá»± Ä‘á»™ng má»—i 2 phÃºt
    fetchSlotsRemainingFromSheet();
    setInterval(fetchSlotsRemainingFromSheet, 120000);

    // =========================
    // RESULTS POPUP (placeholder)
    // =========================
    const resultsData = {
      // Top 5 CAPY: cÃ³ áº£nh
      top5: [
        // { name: "Sky #1", image: "images/top5_1.jpg", note: "Decor vibe: ..." },
      ],
      // Top 10 CHIKO: hiá»ƒn thá»‹ list (10 ngÆ°á»i)
      top10: [
        // "Sky #6", "Sky #7",
      ],
      // Lucky numbers TOMI: hiá»ƒn thá»‹ danh sÃ¡ch (sá»‘ + tÃªn)
      lucky: [
        // { number: 777, name: "Sky A" },
      ],
      // Link bÃ i cÃ´ng bá»‘ (náº¿u cÃ³)
      postUrl: "#"
    };

    function openResults() {
      const popup = document.getElementById("resultsPopup");
      const content = document.getElementById("resultsContent");
      if (!popup || !content) return;

      const top5Html = (resultsData.top5 && resultsData.top5.length)
        ? `
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-3">
            ${resultsData.top5.map((x, i) => `
              <div class="rounded-2xl border border-gray-700 overflow-hidden bg-gray-800 bg-opacity-30">
                <div class="p-4 flex items-center justify-between">
                  <div class="font-bold text-blue-200">ğŸ¥‡ Top ${i+1}</div>
                  <div class="text-xs opacity-70">CAPY</div>
                </div>
                <div class="border-t border-gray-700">
                  <img src="${x.image}" alt="${x.name}" class="w-full object-cover max-h-56">
                </div>
                <div class="p-4">
                  <div class="font-semibold">${x.name}</div>
                  ${x.note ? `<div class="text-sm opacity-80 mt-1">${x.note}</div>` : ``}
                </div>
              </div>
            `).join("")}
          </div>
        `
        : `<div class="mt-3 text-sm opacity-80">ChÆ°a cÃ´ng bá»‘ Top 5 (CAPY) ğŸ«£</div>`;

      const top10Html = (resultsData.top10 && resultsData.top10.length)
        ? `
          <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm">
            ${resultsData.top10.map((name, idx) => `
              <div class="px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 bg-opacity-20">
                ğŸ§¢ #${idx+1} â€¢ ${name}
              </div>
            `).join("")}
          </div>
        `
        : `<div class="mt-3 text-sm opacity-80">ChÆ°a cÃ´ng bá»‘ Top 10 (CHIKO) ğŸ«£</div>`;

      const luckyHtml = (resultsData.lucky && resultsData.lucky.length)
        ? `
          <div class="mt-3 space-y-2 text-sm">
            ${resultsData.lucky.map((x) => `
              <div class="px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 bg-opacity-20">
                ğŸ² <b>${x.number}</b> â€” ${x.name}
              </div>
            `).join("")}
          </div>
        `
        : `<div class="mt-3 text-sm opacity-80">ChÆ°a cÃ´ng bá»‘ danh sÃ¡ch sá»‘ may máº¯n (TOMI) ğŸ«£</div>`;

      content.innerHTML = `
        <div class="space-y-5">
          <button onclick="closeResults()" class="float-right text-sm px-3 py-1 bg-gray-800 rounded-full hover:bg-gray-700">âœ• ÄÃ³ng</button>

          <h2 class="text-2xl font-bold text-blue-300">ğŸ“£ Káº¿t quáº£ Minigame Decor Skylight</h2>
          <p class="text-sm opacity-80">
            CÃ´ng bá»‘ theo 3 háº¡ng má»¥c: <b>Top 5 CAPY</b> (Skyward chá»n) â€¢ <b>Top 10 CHIKO</b> (vote) â€¢ <b>TOMI</b> (lucky numbers).
          </p>

          <div class="rounded-2xl border border-gray-700 p-5 bg-gray-800 bg-opacity-20">
            <div class="font-bold text-blue-200">ğŸ¥‡ Top 5 â€” CAPY (áº£nh)</div>
            ${top5Html}
          </div>

          <div class="rounded-2xl border border-gray-700 p-5 bg-gray-800 bg-opacity-20">
            <div class="font-bold text-blue-200">ğŸ¥ˆ Top 10 â€” CHIKO (vote)</div>
            ${top10Html}
          </div>

          <div class="rounded-2xl border border-gray-700 p-5 bg-gray-800 bg-opacity-20">
            <div class="font-bold text-blue-200">ğŸ¥‰ TOMI â€” Danh sÃ¡ch sá»‘ may máº¯n</div>
            ${luckyHtml}
          </div>

          ${resultsData.postUrl && resultsData.postUrl !== "https://web.facebook.com/photo.php?fbid=122145826178898791&set=pb.61576963754129.-2207520000&type=3"
            ? `<a href="${resultsData.postUrl}" target="_blank"
                 class="inline-flex items-center px-4 py-2 rounded-xl bg-blue-600 hover:bg-blue-500 font-semibold text-sm">
                 ğŸ”— Má»Ÿ bÃ i cÃ´ng bá»‘
               </a>`
            : `<div class="text-xs opacity-60">ğŸ”— Link bÃ i cÃ´ng bá»‘: (báº¡n dÃ¡n vÃ o resultsData.postUrl)</div>`
          }

          <div class="text-xs opacity-60">Team khÃ´ng cháº¥p nháº­n áº£nh AI & buff like áº£o. Náº¿u phÃ¡t hiá»‡n gian láº­n sáº½ há»§y káº¿t quáº£.</div>
        </div>
      `;

      popup.classList.remove("hidden");
    }

    function closeResults() {
      document.getElementById("resultsPopup").classList.add("hidden");
    }
  </script>

</body>
</html>
